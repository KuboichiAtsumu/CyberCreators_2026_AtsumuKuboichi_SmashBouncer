//==============================================================================================================================================
//
// シーンに関する処理
// Author : Atsumu Kuboichi
//
//==============================================================================================================================================

//===========================================================================================================
// ヘッダーインクルード
//===========================================================================================================
#include "scene.h"//シーン
#include "title.h"//タイトル
#include "tutorial.h"//チュートリアル
#include "game.h"//ゲーム
#include "result.h"//リザルト
#include "ranking.h"//ランキング
#include "edit3D.h"//3Dエディタ
#include "object.h"//オブジェクト

//===========================================================================================================
// 静的メンバ変数初期化
//===========================================================================================================
CScene::MODE CScene::m_mode = MODE_NONE;//現在のシーン

//===========================================================================================================
// コンストラクタ
//===========================================================================================================
CScene::CScene()
{
	//メンバ変数初期化
	m_bEdit = false;//エディタモードフラグ
}

//===========================================================================================================
// デストラクタ
//===========================================================================================================
CScene::~CScene()
{
}

//===========================================================================================================
// 初期化処理
//===========================================================================================================
HRESULT CScene::Init()
{
	return S_OK;
}

//===========================================================================================================
// 終了処理
//===========================================================================================================
void CScene::Uninit()
{
	//全オブジェクト終了処理
	CObject::UninitAll();
}

//===========================================================================================================
// 更新処理
//===========================================================================================================
void CScene::Update()
{
	//デバッグのみ
#ifdef _DEBUG
	//チュートリアルかゲーム中のみ
	if (GetMode() == MODE_TUTORIAL || GetMode() == MODE_GAME)
	{
		//F4キーが押された場合
		if (CManager::GetKeyboard()->GetTrigger(DIK_F4))
		{
			//エディタモード切り替え
			m_bEdit = m_bEdit ? false : true;
		}

		//エディタモードの場合
		if (m_bEdit)
		{
			//エディタ更新処理
			CEdit3D::EditUpdate();
		}
	}
#endif // DEBUG
}

//===========================================================================================================
// 描画処理
//===========================================================================================================
void CScene::Draw()
{
}

//===========================================================================================================
// 生成処理
//===========================================================================================================
CScene* CScene::Create(MODE mode)
{
	//ローカル変数宣言
	CScene* pScene = NEW CScene();//シーン情報へのポインタ

	//モードの設定
	m_mode = mode;

	//モード別に動的確保
	switch (mode)
	{
	case MODE_TITLE://タイトル
		pScene = CTitle::Create();
		break;
	
	case MODE_TUTORIAL://チュートリアル
		pScene = CTutorial::Create();
		break;

	case MODE_GAME://ゲーム
		pScene = CGame::Create();
		break;

	case MODE_RESULT://リザルト
		pScene = CResult::Create();
		break;

	case MODE_RANKING://ランキング
		pScene = CRanking::Create();
		break;

	default:
		break;
	}

	return pScene;
}
