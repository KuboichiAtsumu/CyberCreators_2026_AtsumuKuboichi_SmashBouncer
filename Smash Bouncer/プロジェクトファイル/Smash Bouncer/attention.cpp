//==============================================================================================================================================
//
// ゲーム内警告に関する処理
// Author : Atsumu Kuboichi
//
//==============================================================================================================================================

//===========================================================================================================
// ヘッダーインクルード
//===========================================================================================================
#include "attention.h"//ゲーム内警告
#include "game.h"//ゲームシーン

//===========================================================================================================
// コンストラクタ
//===========================================================================================================
CAttention::CAttention(int nPriority) : CGameUI(nPriority)
{
	//メンバ変数初期化
	m_bLightUp = false;//ライトアップフラグ
	m_bUse = false;//使用フラグ
}

//===========================================================================================================
// デストラクタ
//===========================================================================================================
CAttention::~CAttention()
{
}

//===========================================================================================================
// 初期化処理
//===========================================================================================================
HRESULT CAttention::Init()
{
	//ゲームUI初期化処理
	if (FAILED(CGameUI::Init()))
	{
		return E_FAIL;
	}

	return S_OK;
}

//===========================================================================================================
// 終了処理
//===========================================================================================================
void CAttention::Uninit()
{
	//ゲームUI終了処理
	CGameUI::Uninit();
}

//===========================================================================================================
// 更新処理
//===========================================================================================================
void CAttention::Update()
{
	//該当ステージのみ使用する
	if (CGame::GetNumStage() == CGame::STAGE_4
		|| CGame::GetNumStage() == CGame::STAGE_7
		|| CGame::GetNumStage() == CGame::STAGE_10)
	{
		m_bUse = true;
	}
	else
	{
		m_bUse = false;
	}

	//使用フラグがtrueの場合
	if (m_bUse)
	{
		//ローカル変数宣言
		D3DXCOLOR color = GetColor();//カラー情報

		//明るくなっている場合
		if (m_bLightUp)
		{
			color.a += STAND_SPEED;
		}
		//暗くなっている場合
		else
		{
			color.a -= STAND_SPEED;
		}

		//カラーのα値が最大・最小値に達した場合
		if (color.a <= 0.0f || color.a >= 1.0f)
		{
			//ライトアップフラグを切り替える
			m_bLightUp = m_bLightUp ? false : true;
		}

		//更新情報設定
		SetColor(color);//カラー情報

		//ゲームUI更新処理
		CGameUI::Update();
	}
}

//===========================================================================================================
// 描画処理
//===========================================================================================================
void CAttention::Draw()
{
	//使用フラグがtrueの場合
	if (m_bUse)
	{
		//ゲームUI描画処理
		CGameUI::Draw();
	}
}
